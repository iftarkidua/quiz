<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sliding Image Puzzle</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #f0f2f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .game-container {
            text-align: center;
        }

        .puzzle-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2px;
            width: 800px;
            height: 600px;
            max-width: 90vw;
            max-height: 67.5vw;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin: 20px auto;
        }

        .tile {
            background-size: 400% 300%;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            position: relative;
        }

        .tile::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0);
            transition: background 0.2s ease;
        }

        .tile:hover {
            transform: scale(1.02);
            z-index: 1;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .tile:hover::after {
            background: rgba(255, 255, 255, 0.1);
        }

        .empty {
            background: #ffffff;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.05);
        }

        @media (max-width: 600px) {
            .puzzle-container {
                gap: 1px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="puzzle-container" id="puzzleContainer"></div>
    </div>

    <script>
        const PUZZLE_IMAGE = 'https://miro.medium.com/v2/resize:fit:683/1*0CLRU3vizgoXJ058p44Fow.jpeg';
        const ROWS = 3;
        const COLS = 4;
        let emptyCell = { row: ROWS - 1, col: COLS - 1 };

        function createTile(row, col) {
            const tile = document.createElement('div');
            tile.className = 'tile';
            tile.style.backgroundImage = `url(${PUZZLE_IMAGE})`;
            tile.style.backgroundPosition = `${(col * 100) / (COLS - 1)}% ${(row * 100) / (ROWS - 1)}%`;
            tile.dataset.originalRow = row;
            tile.dataset.originalCol = col;
            return tile;
        }

        function initializePuzzle() {
            const container = document.getElementById('puzzleContainer');
            container.innerHTML = '';
            
            // Create tiles
            const tiles = [];
            for (let row = 0; row < ROWS; row++) {
                for (let col = 0; col < COLS; col++) {
                    if (!(row === emptyCell.row && col === emptyCell.col)) {
                        tiles.push(createTile(row, col));
                    }
                }
            }

            // Shuffle tiles
            shuffleTiles(tiles);
            
            // Add tiles to container
            tiles.forEach(tile => container.appendChild(tile));
            container.appendChild(document.createElement('div')); // Empty cell

            // Add click handlers
            container.querySelectorAll('.tile').forEach(tile => {
                tile.addEventListener('click', () => handleTileClick(tile));
            });
        }

        function shuffleTiles(tiles) {
            // Fisher-Yates shuffle
            for (let i = tiles.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [tiles[i], tiles[j]] = [tiles[j], tiles[i]];
            }
        }

        function handleTileClick(clickedTile) {
            const tiles = Array.from(document.querySelectorAll('.tile'));
            const emptyIndex = tiles.length;
            const clickedIndex = tiles.indexOf(clickedTile);
            const clickedPosition = getTilePosition(clickedIndex);
            const emptyPosition = getTilePosition(emptyIndex);

            if (isAdjacent(clickedPosition, emptyPosition)) {
                swapTiles(clickedIndex, emptyIndex);
                if (checkSolution()) {
                    setTimeout(() => alert('Congratulations! Puzzle solved!'), 100);
                }
            }
        }

        function getTilePosition(index) {
            const container = document.getElementById('puzzleContainer');
            const children = Array.from(container.children);
            const cols = COLS;
            
            return {
                row: Math.floor(index / cols),
                col: index % cols
            };
        }

        function isAdjacent(pos1, pos2) {
            return (
                (Math.abs(pos1.row - pos2.row) === 1 && pos1.col === pos2.col) ||
                (Math.abs(pos1.col - pos2.col) === 1 && pos1.row === pos2.row)
            );
        }

        function swapTiles(index1, index2) {
            const container = document.getElementById('puzzleContainer');
            const children = Array.from(container.children);
            [children[index1], children[index2]] = [children[index2], children[index1]];
            container.innerHTML = '';
            children.forEach(child => container.appendChild(child));
        }

        function checkSolution() {
            const tiles = document.querySelectorAll('.tile');
            return Array.from(tiles).every(tile => {
                const currentPosition = getTilePosition(Array.from(tile.parentNode.children).indexOf(tile));
                return (
                    currentPosition.row === parseInt(tile.dataset.originalRow) &&
                    currentPosition.col === parseInt(tile.dataset.originalCol)
                );
            });
        }

        // Start the game
        initializePuzzle();
    </script>
</body>
</html>
